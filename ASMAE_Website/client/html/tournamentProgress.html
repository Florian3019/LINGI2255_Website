<template name="tournamentProgress">
    <div class="page-header">
        <h2 id="TournamentRunning">Déroulement du tournoi</h2>
    </div>

    <div class="{{stepIsDoneClass 1}} firstBlock">
        <h5 id="AvailabilitiesPoint1">1. Lancer les inscriptions au tournoi</h5>
        {{> launchTournament}}
    </div>

    <div class="{{stepIsDoneClass 2}}">
        <h5 id="AvailabilitiesPoint2">2. Envoyer un email d'invitation à tous les utilisateurs</h5>
        <p>Cliquez sur ce bouton pour prévenir tous les utilisateurs du site par email que les inscriptions au tournoi sont lancées</p>
        <center>
            <button id="sendRegistrationsEmail" type="button" class="btn btn-default btn-sm notDone">Envoyer</button>
            <button id="doneButton2" type="button" class="btn btn-default btn-sm notDone">Marquer comme étant fait</button>
            <button id="notDoneButton2" type="button" class="btn btn-default btn-sm okDone">Marquer comme non fait</button>
        </center>
    </div>

    <div class="{{stepIsDoneClass 3}}">
        <h5 id="AvailabilitiesPoint3">3. Accepter les terrains</h5>
        <center>
            <button id="doneButton3" type="button" class="btn btn-default btn-sm notDone">Marquer comme étant fait</button>
            <button id="notDoneButton3" type="button" class="btn btn-default btn-sm okDone">Marquer comme non fait</button>
        </center>
    </div>

    <div class="{{stepIsDoneClass 4}}">
        <h5 id="AvailabilitiesPoint4">4. Clôturer les inscriptions</h5>
        {{> closeRegistrationsBlock}}
    </div>

    <div class="{{stepIsDoneClass 5}}">
        <h5 id="AvailabilitiesPoint5">5. Gérer les poules</h5>
        <p>Utilisez le menu "Gestion du tournoi" pour gérer les poules.</p>
        <center>
            <button id="doneButton5" type="button" class="btn btn-default btn-sm notDone">Marquer comme étant fait</button>
            <button id="notDoneButton5" type="button" class="btn btn-default btn-sm okDone">Marquer comme non fait</button>
        </center>
    </div>

    <div class="{{stepIsDoneClass 6}}">
        <h5 id="AvailabilitiesPoint6">6. Assigner les terrains aux poules</h5>
        <center>
            <button id="assignCourts" type="button" class="btn btn-default btn-sm notDone">Assigner tous les terrains</button>
            <button id="assignIndoorCourts" type="button" class="btn btn-default btn-sm notDone">Assigner les terrains intérieurs</button>
            <button id="doneButton6" type="button" class="btn btn-default btn-sm notDone">Marquer comme étant fait</button>
            <button id="notDoneButton6" type="button" class="btn btn-default btn-sm okDone">Marquer comme non fait</button>
        </center>
    </div>

    <div class="{{stepIsDoneClass 7}}">
        <h5 id="AvailabilitiesPoint7">7. Envoyer un email aux joueurs et aux chefs de poules</h5>
        <p>Cliquez sur ce bouton pour envoyer aux joueurs les informations sur le tournoi et les informations nécessaires aux chefs de poules</p>
        <center>
            <button id="sendPoolsEmail" type="button" class="btn btn-default btn-sm notDone">Envoyer</button>
            <button id="doneButton7" type="button" class="btn btn-default btn-sm notDone">Marquer comme étant fait</button>
            <button id="notDoneButton7" type="button" class="btn btn-default btn-sm okDone">Marquer comme non fait</button>
        </center>
    </div>

    <div class="{{stepIsDoneClass 8}}">
        <h5 id="AvailabilitiesPoint8">8. Terminer le tournoi</h5>
        <center>
            <button id="restartTournamentButton" type="button" class="btn btn-default btn-sm">Terminer</button>
        </center>
    </div>

</template>


<template name="launchTournament">

    {{#if registrationsON}}

    {{#with tournamentData}}
    <p>
        Date: {{tournamentDateFormat tournamentDate}}<br>
        Prix: {{tournamentPrice}}&euro;
    </p>
    {{/with}}
    <h6>Extras:</h6>
    <ul>
        {{#each extras}}
            <li>{{name}} : {{price}}&euro;</li>
        {{/each}}
    </ul>

    {{#if isAdmin}}
        <p>Si vous vous êtes trompé dans la date ou le prix du tournoi cliquez ici pour les modifier (ceci peut avoir des conséquences sur les inscriptions déjà effectuées)</p>
        <center><button id="modifyLaunchButton" type="button" class="btn btn-default btn-sm">Modifier</button></center>
    {{else}}
        <p>Si la date ou le prix du tournoi est incorrect, contactez un administrateur.</p>
    {{/if}}

    {{else}}

    {{#if isAdmin}}

    <form id="launchTournamentForm" role="form">
        <div class="form-group">
            <div class="row">
                <div class="col-sm-8 col-sm-offset-2">
                    <input type="text" name="launchTournamentDate" id="launchTournamentDate" class="form-control" placeholder="Date de début du tournoi" required>
                </div>
            </div>
            <br>
            <div class="row">
                <div class="col-sm-8 col-sm-offset-2">
                    <input type="number" name="tournamentPrice" min="0" id="tournamentPrice" class="form-control" placeHolder="Prix de l'inscription au tournoi (&euro;)" required>
                </div>
            </div>

            <div class="row">
                <div class="col-sm-8 col-sm-offset-2">
                    <h5>Extras</h5>
                </div>
            </div>
            {{> modifyExtras}}

            <br>

            <center>
                <div class="form-group">
                    <button type="submit" class="btn btn-default">C'est parti!</button>
                </div>
            </center>

        </div>
    </form>
    {{else}}
        <p> Seul un administrateur peut lancer les inscriptions au tournoi </p>
    {{/if}}

    {{/if}}
</template>


<template name="closeRegistrationsBlock">
    {{#if isAdmin}}

        {{#if registrationsON}}
            <p>Cliquez sur ce bouton pour fermer les inscriptions au tournoi de cette année</p>
            <center><button id="closeRegistrationsButton" type="button" class="btn btn-default btn-sm">Fermer les inscriptions</button></center>
        {{else}}
            <p>Vous devez d'abord ouvrir les inscriptions avant de pouvoir les clôturer.</p>
        {{/if}}
    {{else}}
        <p>Seul un administrateur peut clôturer les inscriptions.</p>
    {{/if}}
</template>
