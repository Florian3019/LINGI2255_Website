<template name="tournamentRegistration">
    {{#if saturdayRegistration}}
    {{#with getSaturdayData}}
        {{>tournamentRegistrationTemplate data}}
    {{/with}}
    {{/if}}
    {{#if sundayRegistration}}
    {{#with getSundayData}}
        {{>tournamentRegistrationTemplate data}}
    {{/with}}
    {{/if}}
</template>


<template name="tournamentRegistrationTemplate">
  <div class="page-header">
        <h2>Inscription au tournoi de {{getTranslatedDay day}}</h2>
  </div>
  <h4> Date du tournoi : {{getFormattedDate day}}</h4>
  <form role="form">
    <div class="well well-lg">
    <div class="form-group">
      <div class="row">
        <div class="col-sm-3 col-sm-offset-3">
          <div class="form-group has-feedback" id="lastnameDiv">
            <label for="text">Nom:</label>
            <div class="input-group" style="display: inline">
              <input type="text" class="form-control" id="lastname" name="lastname" value="{{profile.lastName}}" ><br>
              <div id="lastnameError" hidden>
                <span class="help-block" id="lastNameError">Merci d'entrer votre nom</span>
                <span class="glyphicon glyphicon-remove form-control-feedback" aria-hidden="true"></span>
              </div>
              <div id="lastnameOK" hidden>
                <span class="glyphicon glyphicon-ok form-control-feedback" aria-hidden="true"></span>
                <span id="inputGroupSuccess1Status" class="sr-only">success)</span>
              </div>
            </div>
          </div>
        </div>
        <div class="col-sm-3">
          <div class="form-group has-feedback" id="firstnameDiv">
            <label for="text">Prénom:</label>
            <div class="input-group" style="display: inline">
              <input type="text" class="form-control" id="firstname" value="{{profile.firstName}}" name="firstname">
              <div id="firstnameError" hidden>
                <span class="help-block" id="firstNameError">Merci d'entrer votre prénom</span>
                <span class="glyphicon glyphicon-remove form-control-feedback" aria-hidden="true"></span>
              </div>
              <div id="firstnameOK" hidden>
                <span class="glyphicon glyphicon-ok form-control-feedback" aria-hidden="true"></span>
                <span id="inputGroupSuccess1Status" class="sr-only">(success)</span>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row" style="margin-top:15px;">
        <div class="col-sm-3 col-sm-offset-3">
          <label>Date de naissance: </label> <br>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-2 col-sm-offset-3">
     	    <div class="form-group has-feedback" id="birthDayDiv">
            <label for="day">Jour:</label>
            <div class="input-group" style="display: inline">
              <input type="number" id="birthDay" class="form-control alonePlayerChangeListener" min="1" max="31" value="{{getDate profile.birthDate}}" name="jour de naissance">
              <div id="birthDayError" hidden>
                <span class="help-block" id="dayError">Merci d'entrer le jour</span>
                <span class="glyphicon glyphicon-remove form-control-feedback" aria-hidden="true"></span>
              </div>
              <div id="birthDayOK" hidden>
                <span class="glyphicon glyphicon-ok form-control-feedback" aria-hidden="true"></span>
                <span id="inputGroupSuccess1Status" class="sr-only">(success)</span>
              </div>
            </div>
          </div>
        </div>
        <div class="col-sm-2">
          <div class="form-group has-feedback" id="birthMonthDiv">
            <label for="month">Mois:</label>
            <div class="input-group" style="display: inline">
              <input type="number" id="birthMonth" class="form-control alonePlayerChangeListener" min="1" max="12" value="{{getMonth profile.birthDate}}" name="mois de naissance">
              <div id="birthMonthError" hidden>
                <span class="help-block" id="monthError">Merci d'entrer le mois</span>
                <span class="glyphicon glyphicon-remove form-control-feedback" aria-hidden="true"></span>
              </div>
              <div id="birthMonthOK" hidden>
                <span class="glyphicon glyphicon-ok form-control-feedback" aria-hidden="true"></span>
                <span id="inputGroupSuccess1Status" class="sr-only">(success)</span>
              </div>
            </div>
          </div>
        </div>
		    <div class="col-sm-2">
          <div class="form-group has-feedback" id="birthYearDiv">
            <label for="year">Année:</label>
            <div class="input-group" style="display: inline">
              <input type="number" id="birthYear" class="form-control alonePlayerChangeListener" min="1900" value="{{getYear profile.birthDate}}" name="année de naissance">
              <div id="birthYearError" hidden>
                <span class="help-block" id="yearError">Merci d'entrer l'année</span>
                <span class="glyphicon glyphicon-remove form-control-feedback" aria-hidden="true"></span>
              </div>
              <div id="birthYearOK" hidden>
                <span class="glyphicon glyphicon-ok form-control-feedback" aria-hidden="true"></span>
                <span id="inputGroupSuccess1Status" class="sr-only">(success)</span>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-3 col-sm-offset-3">
          <div class="form-group has-feedback" id="sexDiv">
		        <label for="sex">Sexe: </label> <br>
             <div class="input-group" style="display: inline">
              <select name="sex" id="sex"  class="form-control" style="display: inline">
                <option value="default" selected="selected" disabled hidden> </option>
                <option value="M">Homme</option>
                <option value="F">Femme</option>
              </select>
              <div id="sexError" hidden>
                <span class="help-block" id="sexErrorText">Merci d'entrer votre sexe</span>
                <span class="glyphicon glyphicon-remove form-control-feedback" aria-hidden="true" style="margin-right:10px"></span>
              </div>
              <div id="sexOK" hidden>
                <span class="glyphicon glyphicon-ok form-control-feedback" aria-hidden="true" style="margin-right:10px"></span>
                <span id="inputGroupSuccess1Status" class="sr-only">(success)</span>
              </div>
            </div>
          </div>
        </div>
        <div class="col-sm-3">
          <div class="form-group">
            <label for="phone"> </label><br>
            <div class="input-group">
              <span class="input-group-addon"><span class="glyphicon glyphicon-earphone"></span></span>
		          <input type="number" class="form-control" id="phone" min="0" value="{{profile.phone}}" name="phone" placeholder="Numéro de téléphone" required>
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-sm-2 col-sm-offset-3">
          <h5><b>Adresse:</b></h5>
        </div>
      </div>

      {{#with getAddress profile.addressID}}
    	<div class="row">
      	<div class="col-sm-2 col-sm-offset-3">
   	  		<div class="form-group has-feedback" id="streetDiv">
            <label for="text">Rue:</label>
            <div class="input-group" style="display: inline">
              <input type="text" class="form-control" id="street" value="{{street}}" name="street">
          		<div id="streetError" hidden>
                <span class="help-block" id="streetErrorText">Merci d'entrer votre rue</span>
                <span class="glyphicon glyphicon-remove form-control-feedback" aria-hidden="true"></span>
              </div>
              <div id="streetOK" hidden>
                <span class="glyphicon glyphicon-ok form-control-feedback" aria-hidden="true"></span>
                <span id="inputGroupSuccess1Status" class="sr-only">(success)</span>
              </div>
            </div>
          </div>
      	</div>
        <div class="col-sm-2">
       	  <div class="form-group has-feedback" id="numberDiv">
            <label for="text">Numéro:</label>
            <div class="input-group">
              <input type="number" class="form-control" id="addressnumber" min="0" value="{{number}}" name="addressNumber">
              <div id="numberError" hidden>
                <span class="help-block" id="numberErrorText">Merci d'entrer votre numéro</span>
                <span class="glyphicon glyphicon-remove form-control-feedback" aria-hidden="true"></span>
              </div>
              <div id="numberOK" hidden>
                <span class="glyphicon glyphicon-ok form-control-feedback" aria-hidden="true"></span>
                <span id="inputGroupSuccess1Status" class="sr-only">(success)</span>
              </div>
            </div>
       	 	</div>
        </div>
        <div class="col-sm-2">
     			<div class="form-group">
       			<label for="text">Boite:</label>
      			<input type="text" class="form-control" id="box" min="0" value="{{box}}" name="boxNumber">
       	 	</div>
      	</div>
    	</div>

   		<div class="row">
            <div class="col-sm-2 col-sm-offset-3">
          		<div class="form-group has-feedback" id="zipcodeDiv">
          		  <label for="text">Code postal:</label>
          		 	<div class="input-group">
                  <input type="number" min="0" step="1" class="form-control" id="zipcode" value="{{zipCode}}" name="zipcode">
                  <div id="zipcodeError" hidden>
                    <span class="help-block" id="zipcodeErrorText">Merci d'entrer votre code postal</span>
                    <span class="glyphicon glyphicon-remove form-control-feedback" aria-hidden="true"></span>
                  </div>
                  <div id="zipcodeOK" hidden>
                    <span class="glyphicon glyphicon-ok form-control-feedback" aria-hidden="true"></span>
                    <span id="inputGroupSuccess1Status" class="sr-only">(success)</span>
                  </div>
                </div>
              </div>
          	</div>
        <div class="col-sm-2">
          <div class="form-group has-feedback" id="cityDiv">
            <label for="text">Ville:</label>
            <div class="input-group" style="display: inline">
              <input type="text" class="form-control" id="city" value="{{city}}" name="city">
              <div id="cityError" hidden>
                <span class="help-block" id="cityErrorText">Merci d'entrer votre ville</span>
                <span class="glyphicon glyphicon-remove form-control-feedback" aria-hidden="true"></span>
              </div>
              <div id="cityOK" hidden>
                <span class="glyphicon glyphicon-ok form-control-feedback" aria-hidden="true"></span>
                <span id="inputGroupSuccess1Status" class="sr-only">(success)</span>
              </div>
            </div>
          </div>
        </div>
        <div class="col-sm-2">
          <div class="form-group has-feedback" id="countryDiv">
            <label for="text">Pays:</label>
            <div class="input-group">
              <input type="text" class="form-control" id="country" value="{{#if country}}{{country}}{{else}}Belgique{{/if}}" name="country">
              <div id="countryError" hidden>
                <span class="help-block" >Merci d'entrer votre pays</span>
                <span class="glyphicon glyphicon-remove form-control-feedback" aria-hidden="true"></span>
              </div>
              <div id="countryOK" hidden>
                <span class="glyphicon glyphicon-ok form-control-feedback" aria-hidden="true"></span>
                <span id="inputGroupSuccess1Status" class="sr-only">(success)</span>
              </div>
            </div>
          </div>
        </div>

     	</div>
        {{/with}}

      <div class="row">
        <div class="col-sm-2 col-sm-offset-3">
          <h5><b>Tournoi:</b></h5>
        </div>
      </div>

      <div class="row">
        <div class="col-sm-3 col-sm-offset-3">
          <div class="form-group has-feedback" id="dateMatchDiv">
            <label for="dateMatch">S'incrire pour le tournoi:</label>
            <div class="input-group" style="display: inline">
              <br>
              <select name="dateMatch" id="dateMatchSelect"  class="form-control dateMatch" style="display: inline">
                <option value="" hidden></option>
                {{#if isSaturday day}}
                <option value="saturday" selected="selected">Mixtes (Samedi)</option>
                <option value="family" >Tournoi des familles (Samedi)</option>
                {{/if}}
                {{#if isSunday day}}
                <option value="sunday" selected="selected">Doubles (Dimanche)</option>
                {{/if}}
              </select>
              <div id="dateMatchError" hidden>
                <span class="help-block" >Merci de préciser le tournoi</span>
                <span class="glyphicon glyphicon-remove form-control-feedback" aria-hidden="true" style="margin-right:10px"></span>
              </div>
              <div id="dateMatchOK" hidden>
                <span class="glyphicon glyphicon-ok form-control-feedback" aria-hidden="true" style="margin-right:10px"></span>
                <span id="inputGroupSuccess1Status" class="sr-only">(success)</span>
              </div>
            </div>
          </div>
        </div>
        <div class="col-sm-3">
		      <div class="form-group has-feedback" id="AFTDiv">
            <label for="playerRank">Classement :</label>
            <div class="input-group" style="display: inline">
              <br>
              <select name="rank" id="rank"  class="form-control" style="display: inline">
  				      <option value="NC" selected="selected">NC</option>
                      {{#each okAFTranking}}
                      <option value="{{this}}">{{this}}</option>
                      {{/each}}
              </select>
              <div id="AFTcheat" hidden>
                  <span class="help-block">Votre classement AFT ne correspond pas à celui sur aftnet.be</span>
                  <span class="glyphicon glyphicon-remove form-control-feedback" aria-hidden="true" style="margin-right:10px"></span>
              </div>
            </div>
          </div>
        </div>
		  </div>
      <div class="row">
        <div class="col-sm-6 col-sm-offset-3">
          <h5><b>Extras:</b></h5>
            {{#each extras day _id}}
            <div class="form-group">
              <label for="number">{{getName}} ({{getPrice}}&euro;)</label>
              <input type="number" id="{{getID}}" name="{{getID}}" min="0" step="1" data-price="{{getPrice}}" value="{{getQuantity}}" class="form-control extraItem" style="width: 15%; display: inline; text-align:center">
              <p style="font-size:100%">{{getComment}}</p>
            </div>
            {{/each}}
        </div>
      </div>


      <div class="row">
        <div class="col-sm-6 col-sm-offset-3">
          Prix du tournoi : {{getTournamentPrice}} €
          <br>
          <b>Total</b> : <input class="form-control" type="number" id="totalToPay" disabled value="{{getTournamentPrice}}" style="width: 15%; display: inline; text-align:center">€
        </div>
      </div>

    <div class="row">
          <div class="col-sm-6 col-sm-offset-3">
              <div class="form-group">
            	  <h5><b>Méthode de paiement:</b></h5>
            	  <div class="radio">
            		  <label><input type="radio" name="paymentMethod" value="{{getPay1}}" checked="checked" />Carte de crédit</label>
                      <img src="/paypal.png" style="height: 25px; margin-left: 10px"><img src="/credit_cards.jpg" style="height: 25px">
                  </div>
            	  <div class="radio">
            		  <label><input type="radio" name="paymentMethod" value="{{getPay2}}" id="Virement"/>Virement bancaire</label>
            	  </div>
            	  <div class="radio">
            		  <label><input type="radio" name="paymentMethod" value="{{getPay3}}" />Cash (le jour même)</label><br />
            	  </div>
              </div>
        </div>
    </div>

      <div class="row">
        <div class="col-sm-2 col-sm-offset-3">
          <h5><b>Souhaits:</b></h5>
        </div>
      </div>

      <div class="row">
		    <div class="col-sm-6 col-sm-offset-3">
		      <div class="form-group">
            <label for="playerWish">Souhaits sur les joueurs:</label>
       	    <textarea name="playerWish" id="playerWish" class="form-control" placeholder="Facultatif"></textarea>
  		    </div>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-6 col-sm-offset-3">
          <div class="form-group">
            <label for="courtWish">Souhaits sur un terrain:</label>
            <textarea name="courtWish" id="courtWish" class="form-control" placeholder="Facultatif"></textarea>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-6 col-sm-offset-3">
          <div class="form-group">
            <label for="otherWish">Autres souhaits:</label>
            <textarea name="otherWish" id="otherWish" class="form-control" placeholder="Facultatif"></textarea>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-6 col-sm-offset-3">
		      <div class="form-group has-feedback" id="emailPlayerDiv">
            <label class="control-label" for="inputGroupSuccess1">Adresse email de votre coéquipier: </label>
            <div class="input-group">
              <span class="input-group-addon">@</span>
              <input type="text" class="form-control" id="emailPlayer" placeholder="Facultatif"> <!-- aria-describedby="inputGroupSuccess1Status"> -->
              <div id="emailPlayerError" hidden>
                <span class="glyphicon glyphicon-remove form-control-feedback" aria-hidden="true"></span>
              </div>
              <div id="emailPlayerOK" hidden>
                <span class="glyphicon glyphicon-ok form-control-feedback" aria-hidden="true"></span>
                <span id="inputGroupSuccess1Status" class="sr-only">(success)</span>
              </div>
            </div>
            <div id="emailPlayerErrorMessage" hidden>
              <span class="help-block emailPlayerError">Ce joueur n'existe pas ou n'a pas de compte</span>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="form-group col-sm-6 col-sm-offset-3 checkboxAloneDiv" id="checkboxAloneDiv">
          <label class="checkbox-inline"><input type="checkbox" value="" id="alone"> Je n'ai pas de partenaire (permet de choisir parmi les autres joueurs seuls)</label>
          <div id="alreadyRegisteredErrorMessage" hidden>
            <span class="help-block alreadyRegisteredError" >Vous êtes déjà inscrit !</span>
          </div>
        </div>
        <div class="form-group checkboxLater col-sm-6 col-sm-offset-3" id="checkboxLater" hidden>
          <label class="checkbox-inline"><input type="checkbox" value="" id="later"> Je veux choisir quelqu'un plus tard </label>
        </div>
		    <div id="refreshErrorMessage" hidden>
          <span class="refreshMessage"> Veuillez vérifier le formulaire avant de pouvoir choisir un partenaire.</span>
		    </div>
        <div class="form-group has-feedback" id="familyDiv">
		    <div id="familyError" hidden>
                 <span class="help-block"> Vous n'avez pas l'âge requis pour participer au tournoi des familles </span>
		    </div>
            <div id="familyOK" hidden>
            </div>
        </div>
      </div>
      <br>
      <div class="row">
        <div class="panel panel-default col-sm-6 col-sm-offset-3" id="tableAlone" hidden>
            <!-- Default panel contents -->

          <div class="panel-heading">Liste des joueurs en attente de partenaire : </div>
            <!-- Table -->
            <div class="table-responsive">
            <table class="table table-hover">
              <thead>
                <tr>
                  <th>Nom</th>
                  <th>Prénom</th>
                  <th>Sexe</th>
                  <th>Age</th>
                  <th>Classement</th>
                </tr>
              </thead>
              <tbody>
                {{#each alonePlayers}}
                  {{#with getPlayer player1._id}}
                      <tr class="aloneRow" id="{{../_id}}" style="cursor: pointer">
                        <td> {{profile.lastName}} </td>
                        <td> {{profile.firstName}} </td>
                        <td> {{profile.gender}} </td>
                        <td> {{getAge profile.birthDate}} </td>
                        <td> {{profile.AFT}} </td>
                      </tr>
                  {{/with}}
                {{/each}}
              </tbody>
            </table>
          </div>
        </div>
        </div>
        <div class="row" id="emptyTableMessage" hidden>
    		<div class="col-sm-6 col-sm-offset-3">
    	          <div id="infoBox" class="alert alert-info" role="alert">
    		        <h4>
    		          <span class="glyphicon glyphicon-info-sign"></span>
    		          <span class="sr-only">Info:</span>
    		          <span id="infoMsg">{{emptyTableMessage}}</span>
    		        </h4>
    		      </div>
    			</div>
    	</div>
      <br>
      <div class="row">
        <div class="col-sm-6 col-sm-offset-3">
        <center>
        <button class="btn btn-default" id="submitRegistration" data-id={{id}}>
              {{#if isSaturday day}}
              {{#if isSaturdayRegistered id}}
              Modifier
              {{else}}
              Soumettre
              {{/if}}
              {{/if}}
              {{#if isSunday day}}
              {{#if isSundayRegistered id}}
              Modifier
              {{else}}
              Soumettre
              {{/if}}
              {{/if}}

              mon inscription
          </button>
          <button id="submit-chargement" class="btn btn-default" style="display:none"><span class="glyphicon glyphicon-refresh glyphicon-refresh-animate"></span> Chargement...</button>
          </center>
        </div>
        </div>
        <br>
        <div class="row" id="noPartnerChosen" hidden>
    		<div class="col-sm-6 col-sm-offset-3">
    	          <div id="infoBox" class="alert alert-info" role="alert">
    		        <h4>
    		          <span class="glyphicon glyphicon-info-sign"></span>
    		          <span class="sr-only">Info:</span>
    		          <span id="infoMsg">Vous n'avez pas choisi de partenaire. Si vous souhaitez choisir un partenaire plus tard ou vous inscrire seul, veuillez cocher la case "Je veux choisir quelqu'un plus tard". Sinon, veuillez spécifier l'adresse email de votre partenaire.</span>
    		        </h4>
    		      </div>
    			</div>
    	</div>

    </div>
    </div>
    </form>
</template>
