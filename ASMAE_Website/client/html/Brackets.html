<template name="brackets">
	  	<!-- Only display button if all options are selected -->
		{{#with getYear}}
			{{#with getType}}
				{{#with getCategory}}
				<div id="bracketOptions" style="display:none">
				  <button type="button" id="start" class="btn btn-default btn-lg">
				    <span class="glyphicon glyphicon-star"></span> Start
				  </button>

				  <label>Gagnants par poule:</label>
				  <input type="number" min="1" class="form-control" id="winnersPerPool" style="width:15%; display:inline" value="2">
	 			</div>
	 			{{/with}}
	 		{{/with}}
		{{/with}}
	<!-- </form> -->

	<div id="infoBox" class="alert alert-info" role="alert" hidden>
	  <h4>
		  <span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span>
		  <span class="sr-only">Info:</span>
		  <span id="infoMsg"></span>
	  </h4>
	</div>

	<div id="wrapper">
	<!-- empty gracket element -->

		{{#with getYear}}
			{{#with getType}}
				{{#with getCategory}}
					{{>gracketTemplate ALLWINNERS=getAllWinners}}
				{{/with}}
			{{/with}}
		{{/with}}
	</div>

	<!-- basic styles -->
	<style type="text/css">
		.g_gracket { margin-top:50px;  width: {{getGracketWidth}}px; padding: 60px 0px 5px; line-height: 150%; position: relative; overflow: hidden;}
		.g_round { float: left; margin-right: 70px; }
		.g_game { position: relative; margin-bottom: 50px; }
		.g_gracket h3 { margin: 0; padding: 10px 8px 8px; font-size: 18px; font-weight: normal; color: #fff; width:200px; min-height:35px;}
		.g_team { background: #0000ff;}
		.g_team:last-child {  background: #ff6600;}
		.g_team[placeHolder="true"]{background : #ff0000;}
		.g_round:last-child { margin-right: 20px; }
		.g_winner { background: #444; }
		.g_winner .g_team { background: none; }
		.g_current { cursor: pointer; background: #A0B43C!important; }
		.g_round_label { top: -5px; width: 200px; font-weight: normal; color: #CCC; text-align: center; font-size: 20px; }
	</style>

	<div id="bracketModal" class="modal fade bracketModal" role="dialog" style="cursor:auto">
    <div class="modal-dialog">

      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <div class="modal-title page-header">
            <h1><small>Modifier le score</small></h1>
          </div>
        </div>


        <div class="modal-body">
		    <label for="text">Score</label>
			<div display="align:center;">

		    {{#with getPairs}}
		    	{{#with getIndex this 0}}
			    	{{#with getPlayer this.player1._id}}
			    		{{this.profile.firstName}} {{this.profile.lastName}} 
			    	{{/with}}
		    		,
			    	{{#with getPlayer this.player2._id}}
			    		{{this.profile.firstName}} {{this.profile.lastName}} 
			    	{{/with}}
					<input
						type="number"
						display="inline"
						min="0"
						step="1"
						class="form-control"
						id="scoreInput0"
						value="{{getScore this}}"
						style="width: 15%;"
						placeholder="0"
						autofocus
						onkeydown="if (event.keyCode == 13) document.getElementById('saveScore').click()">
			  		
		    	{{/with}}
			  	            - 
			  	{{#with getIndex this 1}}
  				  	<input
						type="number"
						display="inline"
						min="0"
						step="1"
						class="form-control"
						id="scoreInput1"
						value="{{getScore this}}"
						style="width: 15%;"
						placeholder="0"
						autofocus
						onkeydown="if (event.keyCode == 13) document.getElementById('saveScore').click()">
				  	{{#with getPlayer this.player1._id}}
			    		{{this.profile.firstName}} {{this.profile.lastName}} 
			    	{{/with}}
		    		,
			    	{{#with getPlayer this.player2._id}}
			    		{{this.profile.firstName}} {{this.profile.lastName}} 
			    	{{/with}}
		    	{{/with}}
		  	{{/with}}
		  	</div>
	  		  <button type="button" id="saveScore" class="btn btn-default btn-lg" data-dismiss="modal">
			    <span class="glyphicon glyphicon-star" aria-hidden="true"></span> Sauver
			  </button>

		</div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Fermer</button>
        </div>
      </div>

    </div>
  </div>

<button type="button" id="getPDF" class="btn btn-default btn-lg" data-pool="{{this._id}}" style="display:none">
<span class="glyphicon glyphicon-download" aria-hidden="true"></span> PDF
</button>

<!-- Frame for the pdf viewer -->
<iframe class="preview-pane" type="application/pdf" height="650" width="100%" frameborder="0" hidden></iframe>
<br>

</template>

<template name="gracketTemplate">
<!-- {{#with getUpdate}} -->
<div class="my_gracket" id="gracketContainer"></div>
<!-- {{/with}} -->
{{#with makeBrackets}}
	{{displayBrackets this}}
{{/with}}
</template>
