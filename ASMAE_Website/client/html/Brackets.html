<template name="brackets">


	<form class="table form-inline" role="form">
	  <div class="form-group">
		  <label for="Year">Année</label>
		  <select class="form-control Year" id="Year">
	      <option value="" disabled="" selected="" hidden></option>
			  <option value="2015"> 2015 </option>
		  </select>
		  
	    <label for="PoolCategory">Catégorie</label>
	    <select class="form-control PoolCategory" id="PoolCategory">
	      <option value="" disabled="" selected="" hidden></option>
	      <option value="preminimes">Pré Minimes</option>
	      <option value="minimes">Minimes</option>
	      <option value="cadets">Cadet</option>
	      <option value="scolars">Scolaire</option>
	      <option value="juniors">Junior</option>
	      <option value="seniors">Seniors</option>
	      <option value="elites">Elites</option>
	    </select>

	    <label for="PoolType">Type</label>
	    <select class="form-control PoolType" id="PoolType">
	      <option value="" disabled="" selected="" hidden></option>
	      <option value="men">Homme</option>
	      <option value="women">Femme</option>
	      <option value="mixed">Mixte</option>
		  <option value="family">Tournoi des familles</option>
	    </select>
	  </div>

	  	<!-- Only display button if all options are selected -->
		{{#with getYear}}
			{{#with getType}}
				{{#with getCategory}}
				  <button type="button" id="start" class="btn btn-default btn-lg">
				    <span class="glyphicon glyphicon-star" aria-hidden="true"></span> Start
				  </button>
	 			{{/with}}
	 		{{/with}}
		{{/with}}
	</form>

	<div id="infoBox" class="alert alert-info" role="alert" hidden>
	  <h4>
		  <span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span>
		  <span class="sr-only">Info:</span>
		  <span id="infoMsg"></span>
	  </h4>
	</div>

	<!-- basic styles -->
	<style type="text/css">
		.g_gracket { width: 9999px; padding: 55px 15px 5px; line-height: 100%; position: relative; overflow: hidden;}
		.g_round { float: left; margin-right: 70px; }
		.g_game { position: relative; margin-bottom: 15px; }
		.g_gracket h3 { margin: 0; padding: 10px 8px 8px; font-size: 18px; font-weight: normal; color: #fff; min-width:200px;}
		.g_team { background: #3597AE; }
		.g_team:last-child {  background: #FCB821; }
		.g_round:last-child { margin-right: 20px; }
		.g_winner { background: #444; }
		.g_winner .g_team { background: none; }
		.g_current { cursor: pointer; background: #A0B43C!important; }
		.g_round_label { top: -5px; font-weight: normal; color: #CCC; text-align: center; font-size: 18px; }
	</style>

	<div id="wrapper">
	<!-- empty gracket element -->
		
		{{#with getYear}}
			{{#with getType}}
				{{#with getCategory}}
					{{>gracketTemplate ALLWINNERS=getAllWinners}}
				{{/with}}
			{{/with}}
		{{/with}}
	</div>

	<div id="bracketModal" class="modal fade bracketModal" role="dialog" style="cursor:auto">
    <div class="modal-dialog">

      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <div class="modal-title page-header">
            <h1><small>Modifier le score</small></h1>
          </div>
        </div>
        

        <div class="modal-body">
		    <label for="text">Score</label>
			<div class="input-group">
				<input 
				type="number" 
				min="0" 
				step="1" 
				class="form-control" 
				id="scoreInput" 
				value="{{getScore}}" 
				placeholder="0" 
				autofocus
				onkeydown="if (event.keyCode == 13) document.getElementById('saveScore').click()"><br>
		  	</div>
	  		  <button type="button" id="saveScore" class="btn btn-default btn-lg" data-dismiss="modal">
			    <span class="glyphicon glyphicon-star" aria-hidden="true"></span> Sauver
			  </button>

		</div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Fermer</button>
        </div>
      </div>

    </div>
  </div>


</template>

<template name="gracketTemplate">
<!-- {{#with getUpdate}} -->
<div class="my_gracket" id="gracketContainer"></div>
<!-- {{/with}} -->
{{#with makeBrackets}}
	{{displayBrackets this}}
{{/with}}
</template>