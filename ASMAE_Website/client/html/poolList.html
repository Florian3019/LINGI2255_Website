<template name="poolList">

<form class="table form-inline" role="form">
  <div class="form-group">
	  <label for="Year">Année</label>
	  <select class="form-control Year" id="Year">
      <option value="" disabled="" selected="" hidden></option>
		  <option value="2015"> 2015 </option>
	  </select>
	  
    <label for="PoolCategory">Catégorie</label>
    <select class="form-control PoolCategory" id="PoolCategory">
      <option value="" disabled="" selected="" hidden></option>
      <option value="preminimes">Pré Minimes</option>
      <option value="minimes">Minimes</option>
      <option value="cadets">Cadet</option>
      <option value="scolars">Scolaire</option>
      <option value="juniors">Junior</option>
      <option value="seniors">Seniors</option>
      <option value="elites">Elites</option>
    </select>

    <label for="PoolType">Type</label>
    <select class="form-control PoolType" id="PoolType">
      <option value="" disabled="" selected="" hidden></option>
      <option value="men">Homme</option>
      <option value="women">Femme</option>
      <option value="mixed">Mixte</option>
	  <option value="family">Tournoi des familles</option>
    </select>
  </div>
</form>

<table id='poolTable' class='table'>

  {{getYear}}
  {{#with getYearInfo}} <!-- Returns a yearData -->
    {{getType this getCurType}}
      {{#with getTypeInfo}}

      {{resetDrake}} <!-- Resets the draggable objects, so that we can move the ones that are created -->
      {{getPools this getCurCategory}}    
      {{#each getPoolsInfo}} <!-- Returns a list of poolData -->
        <td>
          <div class='parent'>
            <h3>
              <label class='label label-primary' for='hy'>Pool</label> <!-- TODO : set the pool name to the court address -->
            </h3>
            <div class='wrapper'>
              <div class='poolContainer' id='{{_id}}'> <!-- _id is here the id of the pool -->
                {{#each this.pairs}} <!-- For each pair id in the pool -->
                  {{>poolItem PAIRID=this POOLID=../_id}} <!-- Set ID to the id of the pool, so that we can make it draggable -->
                {{/each}}
              </div>
            </div>
          </div>
        </td>
      {{/each}}
    {{/with}}
  {{/with}}


</table>

<button type="button" id="save" class="btn btn-default btn-lg">
  <span class="glyphicon glyphicon-star" aria-hidden="true"></span> Save
</button>

<button type="button" id="addPool" class="btn btn-default btn-lg">
  <span class="glyphicon glyphicon-plus" aria-hidden="true"></span> Pool
</button>

</template>

<!-- 
  Takes 2 arguments :
  - PAIRID : the id of this pair
  - ID : the id of the pool of this pair 
-->
<template name="poolItem">
{{getPair PAIRID}} <!-- get the pair data using its id -->
  {{#with getPairInfo}}
    <div id="{{../PAIRID}}" class="Pairs">
      <a href="#" data-toggle="tooltip" title=
      "P1W: {{this.player1.wish}}
      P2W:{{this.player2.wish}}">
        <ul class="list-group">
          <li class="list-group-item" id="{{this.player1._id}}"></li>
          <li class="list-group-item" id="{{this.player2._id}}"></li>
        </ul>
      </a>
      {{getPlayers this.player1._id this.player2._id}}
    </div>
  {{/with}}
</template>