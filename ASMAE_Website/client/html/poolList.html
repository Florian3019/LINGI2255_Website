<template name="poolList">

<form class="table form-inline" role="form">
  <div class="form-group">
	  <label for="Year">Année</label>
	  <select class="form-control Year" id="Year">
		  <option value="2015"> 2015 </option>
	  </select>
	  
    <label for="PoolCategory">Catégorie</label>
    <select class="form-control PoolCategory" id="PoolCategory">
      <option value="" disabled="" selected="" hidden></option>
      <option value="preminimes">Pré Minimes</option>
      <option value="minimes">Minimes</option>
      <option value="cadets">Cadet</option>
      <option value="scolars">Scolaire</option>
      <option value="juniors">Junior</option>
      <option value="seniors">Seniors</option>
      <option value="elites">Elites</option>
    </select>

    <label for="PoolType">Type</label>
    <select class="form-control PoolType" id="PoolType">
      <option value="" disabled="" selected="" hidden></option>
      <option value="men">Homme</option>
      <option value="women">Femme</option>
      <option value="mixt">Mixte</option>
	  <option value="family">Tournoi des familles</option>
    </select>
  </div>
</form>

<table id='poolTable' class='table'>

{{#with getYear getCurYear}} <!-- Returns a yearData -->
  {{#with getType this.getCurType}} <!-- Returns a typeData "might not work since getCurType is a function" -->
    
    {{resetDrake}} <!-- Resets the draggable objects, so that we can move the ones that are created -->
    
    {{#each getCategory this.getCurCategory}} <!-- Returns a list of poolData -->
      <td>
        <div class='parent'>
          <h3>
            <label class='label label-primary' for='hy'>Pool</label> <!-- TODO : set the pool name to the court address -->
          </h3>
          <div class='wrapper'>
            <div class='poolContainer' id='{{_id}}'> <!-- _id is here the id of the pool -->
              {{#each getPair this.pairs}} <!-- Returns a list of pairs that are in "this" pool -->
                {{>poolItem Dat=this ID=../_id}} <!-- Set ID to the id of the pool, so that we can make it draggable -->
              {{/each}}
            </div>
          </div>
        </div>
      </td>
    {{/each}}
    
  {{/with}}
{{/with}}


</table>

<button type="button" id="save" class="btn btn-default btn-lg">
  <span class="glyphicon glyphicon-star" aria-hidden="true"></span> Save
</button>

</template>


<template name="poolItem">

 <!-- Did not check if this part was working -->

  <div id="{{Dat._id}}" class="Pairs">
    <a href="#" data-toggle="tooltip" title=
    "P1W: {{Dat.Player1.wish}}
    P2W:{{Dat.Player2.wish}}">
      <ul class="list-group">
        {{#with getPlayer Dat.Player1._id}}
        <li class="list-group-item">{{profile.lastName}} {{profile.firstName}}</li>
        {{/with}}
        {{#with getPlayer Dat.Player2._id}}
        <li class="list-group-item">{{profile.lastName}} {{profile.firstName}}</li>
        {{/with}}
      </ul>
    </a>
  </div>
</template>