
<!-- Takes 1 parameter : the poolId for this score table-->
<template name="scoreTable">
  <!-- link to style for button http://bootsnipp.com/snippets/featured/bootstrap-square-buttons -->
<link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css" rel="stylesheet" type="text/css" />


{{#with getLeader this._id}}
<h3>Chef de poule: </h3>
<address>
  <a href="mailto:{{getEmail this}}" class="btn btn-sq-lg btn-primary">
                  <i class="fa fa-user fa-5x"></i><br/>
                  <strong>{{this.profile.firstName}} {{this.profile.lastName}}</strong><br>
                  {{#unless equals this.profile.phone undefined}}<abbr title="Phone">Téléphone:</abbr> {{this.profile.phone}} <br>{{/unless}}
                  {{getEmail this}}<br>
  </a>
  <!-- <strong>{{this.profile.firstName}} {{this.profile.lastName}}</strong><br>
  {{#unless equals this.profile.phone undefined}}<abbr title="Phone">Téléphone:</abbr> {{this.profile.phone}} <br>{{/unless}}
  <a href="mailto:{{getEmail this}}">{{getEmail this}}</a> -->
</address>
{{/with}}

<table id='scoreTable' class='table'>

{{#with getPairs this._id}}
  <tr>
    <th>
      <div class="page-header">
        <h1><span class="glyphicon glyphicon-arrow-down" aria-hidden="true"></span> VS <span class="glyphicon glyphicon-arrow-right" aria-hidden="true"></span> </h1>
      </div>
    </th>
      {{#each this}}
        <th>
          <ul class="list-group">
          {{#with getPlayer this.player1._id}}
            <li class="list-group-item"> {{this.profile.firstName}} {{this.profile.lastName}} </li>
          {{/with}}
          {{#with getPlayer this.player2._id}}
            <li class="list-group-item"> {{this.profile.firstName}} {{this.profile.lastName}} </li>
          {{/with}}
          </ul>
        </th>
      {{/each}}
  </tr>


  {{#each this}}
    <tr>
        <th>
          <ul class="list-group">
          {{#with getPlayer this.player1._id}}
            <li class="list-group-item"> {{this.profile.firstName}} {{this.profile.lastName}} </li>
          {{/with}}
          {{#with getPlayer this.player2._id}}
            <li class="list-group-item"> {{this.profile.firstName}} {{this.profile.lastName}} </li>
          {{/with}}
          </ul>
        </th>

        {{#each ..}}
          {{#if equals this._id ../_id}}
          <td class="selfMatch">

          </td>
          {{else}}
          <td>
            <div class="input-group" display="inline">
              {{#with getMatch ../../../_id ../_id this._id}} <!-- Returns the match corresponding to this pair -->
              <input
                type="number"
                min="0"
                step="1"
                class="form-control points"
                data-matchid="{{this._id}}"
                data-pairid="{{../../_id}}"
                value="{{getPoints this ../../_id}}">
              {{/with}}
            </div>
          </td>
          {{/if}}
        {{/each}}
    </tr>
  {{/each}}
{{/with}}
</table>

  <button type="button" id="save" class="btn btn-default btn-lg">
    <span class="glyphicon glyphicon-star" aria-hidden="true"></span> Sauver
  </button>
  <button type="button" id="getPDF" class="btn btn-default btn-lg" data-pool="{{this._id}}">
    <span class="glyphicon glyphicon-download" aria-hidden="true"></span> PDF
  </button>

  <div id="successBox" class="alert alert-success" role="alert" hidden>
    <h4>
      <span class="glyphicon glyphicon-ok" aria-hidden="true"></span>
      <span class="sr-only">Succès:</span>
      <span id="infoMsg">Scores sauvés !</span>
    </h4>
  </div>


<div class="checkbox">
  <label class="checkbox-inline"><input type="checkbox" value="" id="checkBoxEmptyTable"> Table vide </label>
</div>

<!-- Frame for the pdf viewer -->
<iframe class="preview-pane" type="application/pdf" height="650" width="100%" frameborder="0" hidden></iframe>
<br>

</template>
